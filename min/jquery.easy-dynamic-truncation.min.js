/* (c) Aaron Gustafson (@AaronGustafson). MIT License. http://github.com/easy-designs/jquery.easy-dynamic-truncation.js */
(function(d,i,j,h){var b="click",f="truncate",l=f+"-reveal",n=f+"-collapsed",k=f+"-max-items",m="[data-"+k+"]",a=f+"-auto-display",g=f+"-exclude",c=d(m),e=d('<div class="more-link"><a class="'+l+'" href="#show-more">Read More</a></div>');if("ontouchstart" in i||"createTouch" in j){b="touchend"}c.each(function(){var t=d(this),w=t.data(k),o=t.data(g),q=t.data(a),r=t.is("[data-"+f+"-embed]"),p=t.siblings(".more-link"),v=(p.length>0),s,u=(o!=h?t.children(":not("+o+")"):t.children()).eq(w-1).nextAll().filter(":not(.more-link)");if(q!=h){q=d(i).width()>=q}function x(A){var z=d(this),y=z.parent();u.removeClass(n);z.removeClass(l);if(!v){if(y.is(".more-link")){y.remove()}else{z.remove()}}else{z.html(z.html().replace("More","All"));z.off(b,x);A.preventDefault()}}if(!q&&u.length){u.addClass(n);if(!v){p=e.clone();if(r){p=p.find("a").wrap('<span class="more-link"/>').parent().prepend("\u2026 ");u.eq(0).prev().append(p)}else{t.closest(":not(ol,ul,dl)").append(p)}}else{s=p.find("a").addClass(l);s.html(s.html().replace("All","More"))}p.on(b,x)}})})(jQuery,window,document);